<!DOCTYPE html>
<html>
  <head>
    <title>DrinkApp</title>
    <%= favicon_link_tag "drinkapp-icon.svg" %>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <style>
      /* AllRecipes-inspired Design */
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; line-height: 1.6; }
      
      /* Header */
      .header { background: white; border-bottom: 1px solid #ddd; padding: 15px 0; position: sticky; top: 0; z-index: 100; }
      .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; }
      .logo { font-size: 28px; font-weight: bold; color: #d54215; text-decoration: none; display: flex; align-items: center; gap: 10px; }
      .logo-icon { width: 32px; height: 32px; }
      .search-box { flex: 1; max-width: 500px; margin: 0 30px; }
      .search-box input { width: 100%; padding: 10px 15px; border: 1px solid #ddd; border-radius: 25px; font-size: 16px; }
      /* Hero Section */
      .hero { background: linear-gradient(135deg, #fff5f0 0%, #ffe8e0 100%); padding: 20px 20px 15px; text-align: center; }
      .hero h1 { font-size: 28px; color: #333; margin-bottom: 8px; }
      .hero p { font-size: 15px; color: #666; margin-bottom: 0; }
      
      /* Filter Tags */
      .filters { max-width: 1200px; margin: 0 auto; padding: 30px 20px; }
      .filter-title { font-size: 16px; color: #333; margin-bottom: 15px; }
      .tag-container { display: flex; flex-wrap: wrap; gap: 10px; }
      .tag { display: inline-block; }
      .tag input { display: none; }
      .tag label { display: inline-block; padding: 8px 16px; background: white; border: 1px solid #ddd; border-radius: 20px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
      .tag label:hover { border-color: #d54215; }
      .tag input:checked + label { background: #d54215; color: white; border-color: #d54215; }
      
      /* Recipe Grid */
      .recipes-section { max-width: 1200px; margin: 0 auto; padding: 20px; }
      .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
      .section-header h2 { font-size: 24px; color: #333; }
      .recipe-count { color: #666; }
      
      /* Recipe Cards */
      .recipe-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
      .recipe-card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s; }
      .recipe-card:hover { transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
      .recipe-card a { text-decoration: none; color: inherit; display: block; }
      .recipe-image { width: 100%; height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; overflow: hidden; }
      .recipe-image img { width: 100%; height: 100%; object-fit: cover; }
      .recipe-placeholder { font-size: 60px; }
      .recipe-content { padding: 20px; }
      .recipe-title { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 8px; }
      .recipe-meta { color: #666; font-size: 14px; }
      .rating-badge { display: inline-flex; align-items: center; background: #fff3e0; padding: 4px 8px; border-radius: 4px; margin-top: 8px; }
      .rating-badge .star { color: #ff9800; margin-right: 4px; }
      
      /* Flash Messages */
      .flash { padding: 15px; text-align: center; }
      .flash.notice { background: #e8f5e9; color: #2e7d32; }
      .flash.alert { background: #ffebee; color: #c62828; }
      
      /* Empty State */
      .empty-state { text-align: center; padding: 60px 20px; }
      .empty-state-icon { font-size: 64px; margin-bottom: 20px; }
      .empty-state h3 { font-size: 24px; margin-bottom: 10px; }
      .empty-state p { color: #666; margin-bottom: 20px; }
      .btn { display: inline-block; padding: 12px 30px; background: #d54215; color: white; text-decoration: none; border-radius: 25px; font-weight: bold; }
      .btn:hover { background: #c43d12; }
      
      /* Footer */
      .footer { background: #f0f0f0; border-top: 1px solid #ddd; padding: 30px 20px; margin-top: 50px; }
      .footer-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
      .footer-logo { font-size: 24px; font-weight: bold; color: #d54215; display: flex; align-items: center; gap: 8px; }
      .footer-icon { width: 28px; height: 28px; vertical-align: middle; }
      
      /* Recipe Detail Page */
      .recipe-detail { max-width: 1000px; margin: 0 auto; padding: 30px 20px; }
      .back-link { color: #666; text-decoration: none; margin-bottom: 20px; display: inline-block; }
      .back-link:hover { color: #d54215; }
      .recipe-header { margin-bottom: 30px; }
      .recipe-header h1 { font-size: 32px; margin-bottom: 10px; }
      .recipe-header .meta { color: #666; }
      .recipe-detail-image { width: 100%; max-height: 500px; object-fit: cover; border-radius: 8px; margin-bottom: 30px; }
      .recipe-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
      @media (max-width: 768px) { .recipe-columns { grid-template-columns: 1fr; } }
      .column h2 { font-size: 20px; border-bottom: 2px solid #d54215; padding-bottom: 10px; margin-bottom: 20px; }
      .ingredient-list { list-style: none; }
      .ingredient-list li { padding: 8px 0; border-bottom: 1px solid #eee; }
      .ingredient-list li:last-child { border-bottom: none; }
      .instructions { white-space: pre-line; line-height: 1.8; }
      .instructions p { margin-bottom: 15px; }
      .rating-section, .notes-section { background: #f9f9f9; padding: 25px; border-radius: 8px; margin-top: 30px; }
      .rating-section h3, .notes-section h3 { margin-bottom: 15px; }
      textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-family: inherit; }
      .submit-btn { margin-top: 10px; padding: 10px 25px; background: #d54215; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
      .submit-btn:hover { background: #c43d12; }
      .star-rating { font-size: 30px; color: #ddd; cursor: pointer; }
      .star-rating label { cursor: pointer; }
      .star-rating input { display: none; }
      .star-rating input:checked ~ label,
      .star-rating label:hover,
      .star-rating label:hover ~ label { color: #ff9800; }
      
      .serving-selector { display: flex; align-items: center; gap: 10px; }
      .serving-selector label { font-weight: bold; color: #666; font-size: 14px; }
      .serving-selector select { padding: 6px 12px; border: 1px solid #ddd; border-radius: 4px; background: white; font-size: 14px; cursor: pointer; }
      .serving-selector select:hover { border-color: #d54215; }
      .serving-selector select:focus { outline: none; border-color: #d54215; }
      
      /* New Filter Styles */
      .filters { max-width: 1200px; margin: 0 auto; padding: 20px; }
      
      /* Accordion Styles */
      .filters-header {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 12px 0;
        border-bottom: 1px solid #e0e0e0;
        margin-bottom: 0;
      }
      
      .filters-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: #d54215;
        color: white;
        border: none;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .filters-toggle:hover {
        background: #c43d12;
        transform: translateY(-1px);
      }
      
      .toggle-arrow {
        font-size: 12px;
        transition: transform 0.3s;
      }
      
      .active-filters-summary {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        flex: 1;
      }
      
      .mini-pill {
        display: inline-flex;
        align-items: center;
        padding: 4px 10px;
        background: #f0f0f0;
        border: 1px solid #ddd;
        border-radius: 12px;
        font-size: 12px;
        color: #555;
      }
      
      .filters-content {
        max-height: 2000px;
        overflow: hidden;
        transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        padding-top: 20px;
      }
      
      .filters-content.collapsed {
        max-height: 0;
        padding-top: 0;
        padding-bottom: 0;
      }
      
      .selected-filters { 
        display: flex; 
        flex-wrap: wrap; 
        align-items: center; 
        gap: 8px; 
        margin-bottom: 20px;
        padding: 15px;
        background: #fff8f5;
        border-radius: 8px;
        border: 1px solid #ffe0d6;
      }
      
      .selected-label { 
        font-weight: bold; 
        color: #666; 
        margin-right: 8px;
        font-size: 14px;
      }
      
      .filter-pill { 
        display: inline-flex; 
        align-items: center; 
        gap: 4px;
        padding: 6px 12px;
        background: #d54215;
        color: white;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .filter-pill:hover { 
        background: #c43d12; 
        transform: translateY(-1px);
      }
      
      .filter-pill .remove { 
        font-weight: bold; 
        opacity: 0.8;
        font-size: 16px;
        line-height: 1;
      }
      
      .clear-link { 
        margin-left: auto; 
        color: #d54215; 
        font-size: 13px;
        text-decoration: none;
        font-weight: 500;
      }
      
      .clear-link:hover { text-decoration: underline; }
      
      .filter-grid { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 20px;
      }
      
      @media (max-width: 900px) {
        .filter-grid { grid-template-columns: 1fr; }
      }
      
      .filter-group {
        background: white;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
        overflow: hidden;
      }
      
      .group-title {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 15px;
        margin: 0;
        background: #f8f8f8;
        font-size: 14px;
        font-weight: 600;
        color: #333;
        cursor: pointer;
        user-select: none;
        border-bottom: 1px solid #e0e0e0;
        transition: background 0.2s;
      }
      
      .group-title:hover { background: #f0f0f0; }
      
      .toggle-icon {
        font-size: 12px;
        transition: transform 0.2s;
        color: #666;
      }
      
      .group-count {
        margin-left: auto;
        font-size: 12px;
        color: #999;
        font-weight: normal;
        background: #e8e8e8;
        padding: 2px 8px;
        border-radius: 10px;
      }
      
      .group-content {
        padding: 12px;
        transition: max-height 0.3s ease-out;
      }
      
      .group-content.collapsed {
        display: none;
      }
      
      .category-tags {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }
      
      @media (max-width: 400px) {
        .category-tags {
          grid-template-columns: 1fr;
        }
      }
      
      .category-tag {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 16px;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s;
        user-select: none;
      }
      
      .category-tag:hover {
        background: #ebebeb;
        border-color: #ccc;
      }
      
      .category-tag.selected {
        background: #d54215;
        border-color: #d54215;
        color: white;
      }
      
      .category-tag.selected .tag-count {
        background: rgba(255,255,255,0.3);
        color: white;
      }
      
      .hidden-checkbox { display: none; }
      
      .tag-name { font-weight: 500; }
      
      .tag-count {
        font-size: 11px;
        color: #666;
        background: #e0e0e0;
        padding: 2px 6px;
        border-radius: 10px;
        font-weight: 600;
      }
      
      .additional-filters {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        padding: 15px;
        background: white;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
      }
      
      .filter-field {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .filter-field label {
        font-size: 13px;
        font-weight: 600;
        color: #555;
      }
      
      .filter-select {
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: white;
        font-size: 14px;
        min-width: 150px;
        cursor: pointer;
      }
      
      .filter-select:hover { border-color: #bbb; }
      .filter-select:focus { 
        outline: none; 
        border-color: #d54215;
        box-shadow: 0 0 0 2px rgba(213, 66, 21, 0.1);
      }
      
      @media (max-width: 768px) {
        .filter-grid { grid-template-columns: 1fr; }
        .selected-filters { padding: 10px; }
        .additional-filters { flex-direction: column; }
      }
      
      @media (max-width: 768px) {
        .header-content { flex-direction: column; }
        .search-box { margin: 15px 0; width: 100%; }
        .recipe-grid { grid-template-columns: 1fr; }
      }
    </style>
  </head>

  <body>
    <header class="header">
      <div class="header-content">
        <%= link_to root_path, class: "logo" do %>
          <%= image_tag "drinkapp-icon.svg", class: "logo-icon", alt: "DrinkApp" %>
          <span>DrinkApp</span>
        <% end %>
        
        <div class="search-box">
          <%= form_with url: recipes_path, method: :get do %>
            <%= text_field_tag :search, params[:search], placeholder: "Find a cocktail..." %>
          <% end %>
        </div>
        
      </div>
    </header>

    <% if flash[:notice] %>
      <div class="flash notice"><%= flash[:notice] %></div>
    <% end %>
    <% if flash[:alert] %>
      <div class="flash alert"><%= flash[:alert] %></div>
    <% end %>

    <main>
      <%= yield %>
    </main>
    
    <footer class="footer">
      <div class="footer-content">
        <span class="footer-logo"><%= image_tag "drinkapp-icon.svg", class: "footer-icon", alt: "DrinkApp" %> DrinkApp</span>
        <p>Â© <%= Date.current.year %> DrinkApp</p>
      </div>
    </footer>
  </body>
</html>
